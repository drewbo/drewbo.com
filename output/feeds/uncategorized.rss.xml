<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>drewbo.com</title><link>http://drewbo.com/</link><description></description><atom:link href="http://drewbo.com/feeds/uncategorized.rss.xml" rel="self"></atom:link><lastBuildDate>Mon, 28 Apr 2014 22:00:00 -0400</lastBuildDate><item><title>New KenPom Metric</title><link>http://drewbo.com/blog/2014/04/28/kenpom-drama/</link><description>&lt;p&gt;In the process of writing an article about March Madness ticket prices (coming soon), I ended up on &lt;a class="reference external" href="http://kenpom.com/"&gt;kenpom.com&lt;/a&gt;, an absolutely fantastic site
for college basketball analysis. The rankings and associated metrics produced by the site's namesake, Ken Pomeroy, have become nearly industry standard for coaches and fans alike.
Note that parts of the site are behind a paywall but if you have even the slightest overlaping interesting in college basketball and statistics,
it's definitely worth the subscription fee of $19.99.&lt;/p&gt;
&lt;p&gt;The whole site is worth a look but I'd like to focus on one particular statistic here:  win probability.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class="section" id="win-probability"&gt;
&lt;h2&gt;Win Probability&lt;/h2&gt;
&lt;p&gt;Win Probability, or Win Expectancy, is a way of answering the question, &amp;quot;Given the current game state, what are the chances a selected team wins the game?&amp;quot; To figure this out, we look back at
previous games to find similar situations (score differential, time remaining, etc.) and see how many times the ended in a given result. For instance, if a team was leading by 20 at halftime
in a college basketball game, they end up winning about 94% of the time.&lt;/p&gt;
&lt;p&gt;This can be applied to all sports: &lt;a class="reference external" href="http://www.fangraphs.com/library/misc/we/"&gt;Fangraphs&lt;/a&gt; has a nice primer on the idea in the context of baseball that's worth a read. For college basketball, &lt;a class="reference external" href="http://kenpom.com/blog/index.php/weblog/entry/win_probability_for_grown_ups"&gt;Ken Pomeroy has created a model&lt;/a&gt; based on
historical data and his own ratings to &lt;a class="reference external" href="http://kenpom.com/blog/index.php/weblog/entry/win_probability_for_every_college_game"&gt;create win probability graphs for each game&lt;/a&gt;. I used &lt;a class="reference external" href="http://www.highcharts.com/"&gt;Highcharts.js&lt;/a&gt; to reproduce one of these graphs below:&lt;/p&gt;
&lt;div class="container" id="container"&gt;
Script failed to load&lt;/div&gt;
&lt;p&gt;The game was 30-27 at halftime and Michigan slowly pulled away before it got a bit close in the waning minutes. Given that Stanford had a shot to tie at the end, it seems like these probabilities may be overstated but
I'll include KenPom's word of caution from the post linked above here:&lt;/p&gt;
&lt;blockquote&gt;
A note of caution when using probabilities: It’s worth mentioning that 90% doesn’t mean 100%. A team with a true 90% win probability is in a great position, but they will
lose 10% of the time. In addition, these are win probabilities, not chance-of-game-getting-interesting probabilities. If this system is calibrated, a team with a 90% chance
of winning will lose 10% of the time, but the game will become interesting significantly more often than that. The 90% team will even trail in more than 10% of the
cases, because all this method cares about is the end result. (End of note of caution.)&lt;/blockquote&gt;
&lt;p&gt;Note that the graphs on KenPom's site also show the game score and introduce the concept of leverage (how important each possession is) but I don't want to liberate everything from behind the paywall.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="game-drama"&gt;
&lt;h2&gt;Game Drama&lt;/h2&gt;
&lt;p&gt;While Win Probability (WP) is a great way to quantify current game state, I wanted to expand it into something which described the game as a whole.
As such, I'd like to introduce the concept of &amp;quot;game drama&amp;quot;. The goal of this statistic is to quantify how &amp;quot;crazy&amp;quot; the game was as measured in changes to WP.
I'm probably not the first to experiment with this idea but I'm going to try some new things to refine it a bit.&lt;/p&gt;
&lt;p&gt;The basic concept is to sum up the total vertical movement of the WP graph. As a fan, you experience each of these swings as stress or excitment in realizing your
team is either further or closer to winning. In R, it looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sum&lt;span class="p"&gt;(&lt;/span&gt;abs&lt;span class="p"&gt;(&lt;/span&gt;diff&lt;span class="p"&gt;(&lt;/span&gt;yvalues&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In my data, I refer to this as 'totalDrama'. I've also divided by possessions to control for longer or shorter games &lt;a class="footnote-reference" href="#id3" id="id1"&gt;[1]&lt;/a&gt;; this shows up as 'perDrama' in the data &lt;a class="footnote-reference" href="#id4" id="id2"&gt;[2]&lt;/a&gt;.
The game shown above had a Drama score of 4.29 (meaning it's total movement was 4.29 times the height of the graph) and a 3.25% change in WP per possession. For the
past season, this was 1600th most dramatic game out of the 5477 games with available data.&lt;/p&gt;
&lt;p&gt;Sorting by totalDrama tends to put longer games on top (not necessarily a flaw if you like long, roller-coaster games). The possession controlled metric attempts to control for this a bit
but still leaves a lot of OT games on top. You can view this as either (1) a flaw in the metric or (2) an accurate reflection of the fact that lots of drama goes into forcing overtime and
especially remaining tied through multiple overtimes&lt;/p&gt;
&lt;p&gt;The two extensions of the metric I'd like to explore in the future:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Is there a way to &amp;quot;penalize&amp;quot; games with lots of fouls at the end? It does keep the game closer (and potentially lead to game-winning shots later on) but the drama tends to let down during free-throws.&lt;/li&gt;
&lt;li&gt;Which individual possession had the biggest WP impact? They will all likely be buzzer beaters but which was the most unlikely?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I'll get to those at some point in the future but without further ado, here's the link to the &lt;a class="reference external" href="../../../../../pages/projects.html"&gt;project page&lt;/a&gt; which contains all of last year's drama scores.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="selected-games"&gt;
&lt;h2&gt;Selected Games&lt;/h2&gt;
&lt;p&gt;I've also selected a few games to display just to gut check the statistic. Even if some of them look like they are being played in high school gyms,
it's hard to deny that the following games didn't get the blood pressure up.&lt;/p&gt;
&lt;p&gt;Top 5 Most Dramatic College Basketball Games of 2014 (on a per possession basis)&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="70%" /&gt;
&lt;col width="5%" /&gt;
&lt;col width="14%" /&gt;
&lt;col width="11%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game&lt;/td&gt;
&lt;td&gt;Pos.&lt;/td&gt;
&lt;td&gt;totalDrama&lt;/td&gt;
&lt;td&gt;perDrama&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="https://www.youtube.com/watch?v=VUplP4vx8Es"&gt;Arkansas St. 116 Arkansas Little Rock 114&lt;/a&gt;  (4OT)&lt;/td&gt;
&lt;td&gt;96&lt;/td&gt;
&lt;td&gt;14.02&lt;/td&gt;
&lt;td&gt;7.46%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="https://www.youtube.com/watch?v=IzCt3gSCu4U"&gt;Purdue 77 Minnesota 74&lt;/a&gt;  (3OT)&lt;/td&gt;
&lt;td&gt;77&lt;/td&gt;
&lt;td&gt;10.84&lt;/td&gt;
&lt;td&gt;7.09%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="https://www.youtube.com/watch?v=jtIT8BtxNnQ"&gt;Iowa St. 98 Oklahoma St. 97&lt;/a&gt;  (3OT)&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;12.52&lt;/td&gt;
&lt;td&gt;6.77%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://www.standard.net/stories/2014/02/01/oh-my-weber-state-loses-sac-state-after-unbelievable-finish"&gt;Sacramento St. 78 Weber St. 75&lt;/a&gt;  (OT)&lt;/td&gt;
&lt;td&gt;70&lt;/td&gt;
&lt;td&gt;9.20&lt;/td&gt;
&lt;td&gt;6.57%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="https://www.youtube.com/watch?v=a_ZeJ715obo"&gt;Portland St. 81  Montana 78&lt;/a&gt; (3OT)&lt;/td&gt;
&lt;td&gt;77&lt;/td&gt;
&lt;td&gt;10.18&lt;/td&gt;
&lt;td&gt;6.57%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The Arkansas St./Arkansas Little Rock game is insanely far away from the pack in totalDrama. As mentioned above, it gets some benefit for going to extra overtimes
even when controlling for possessions. I've included links to all the highlights; I'd especially recommend the Sacramento St. game as it features a pretty ridiculous combination of
late game shots.&lt;/p&gt;
&lt;p&gt;Top 5 Least Dramatic College Basketball Games of 2014 (on a per possession basis)&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="69%" /&gt;
&lt;col width="6%" /&gt;
&lt;col width="14%" /&gt;
&lt;col width="11%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game&lt;/td&gt;
&lt;td&gt;Pos.&lt;/td&gt;
&lt;td&gt;totalDrama&lt;/td&gt;
&lt;td&gt;perDrama&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Pittsburgh 84 Howard 52&lt;/td&gt;
&lt;td&gt;62&lt;/td&gt;
&lt;td&gt;0.0189&lt;/td&gt;
&lt;td&gt;0.015%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Iowa 109 Maryland Eastern Shore 63&lt;/td&gt;
&lt;td&gt;82&lt;/td&gt;
&lt;td&gt;0.0220&lt;/td&gt;
&lt;td&gt;0.013%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;San Diego St. 76 Southern Utah 39&lt;/td&gt;
&lt;td&gt;63&lt;/td&gt;
&lt;td&gt;0.0137&lt;/td&gt;
&lt;td&gt;0.011%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Louisville 99 Cornell 54&lt;/td&gt;
&lt;td&gt;76&lt;/td&gt;
&lt;td&gt;0.0162&lt;/td&gt;
&lt;td&gt;0.010%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Iowa 86 Arkansas Pine Bluff 61&lt;/td&gt;
&lt;td&gt;76&lt;/td&gt;
&lt;td&gt;0.0155&lt;/td&gt;
&lt;td&gt;0.010%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The teams that won these games were heavily favored going in and never relented. Thus, the WP line never moved very far off one edge of the graph.
So unless you were looking forward to a blowout, I apologize to anyone who had to watch one of these games (I didn't even include links for them). Good for Iowa for blowing away two overmatched opponents I guess?&lt;/p&gt;
&lt;p&gt;Top 3 Most Dramatic March Madness Games of 2014 (on a per possession basis)&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="69%" /&gt;
&lt;col width="6%" /&gt;
&lt;col width="14%" /&gt;
&lt;col width="11%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game&lt;/td&gt;
&lt;td&gt;Pos.&lt;/td&gt;
&lt;td&gt;totalDrama&lt;/td&gt;
&lt;td&gt;perDrama&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wisconsin 64 Arizona 63  (OT)&lt;/td&gt;
&lt;td&gt;61&lt;/td&gt;
&lt;td&gt;7.40&lt;/td&gt;
&lt;td&gt;5.92%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;North Dakota St. 80 Oklahoma 75  (OT)&lt;/td&gt;
&lt;td&gt;72&lt;/td&gt;
&lt;td&gt;7.92&lt;/td&gt;
&lt;td&gt;5.46%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Dayton 55 Syracuse 53&lt;/td&gt;
&lt;td&gt;58&lt;/td&gt;
&lt;td&gt;6.40&lt;/td&gt;
&lt;td&gt;5.37%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Having watched a good deal of tournament games, I was surprised how low these were rated compared to the top games above. For one, the statistic doesn't take into
account the stakes of the game, so it's hard to recreate the &amp;quot;win-or-go-home&amp;quot; feel in mathmatical form. But another thing it illustrates is that &amp;quot;dramatic&amp;quot; games
don't necessarily imply good basketball. The Dayton/Syracuse game was a low-possession but also low scoring game that was pretty difficult to watch. However, it
did stay relatively close throughout and come down to the wire, in the process experiencing a lot of swings in Win Probability.&lt;/p&gt;
&lt;p&gt;Let me know if you've noticed anything else yourself or have suggestions about the metric. Here's another data link to the &lt;a class="reference external" href="../../../../../pages/projects.html"&gt;project page&lt;/a&gt;.&lt;/p&gt;
&lt;div class="separator container"&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;table class="docutils footnote" frame="void" id="id3" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Controlling for number of possession is a hallmark of KenPom metrics.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;This is technically the totalDrama divided by number of points in the Win Probability graph which is very close to, or in some cases exactly equal to, possessions * 2.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Drew Bollinger</dc:creator><pubDate>Mon, 28 Apr 2014 22:00:00 -0400</pubDate><guid>tag:drewbo.com,2014-04-28:blog/2014/04/28/kenpom-drama/</guid><category>blog</category><category>r</category><category>college basketball</category><category>kenpom</category></item><item><title>Benford's Law</title><link>http://drewbo.com/blog/2014/04/21/benfords-law/</link><description>&lt;p&gt;The last thing the internet needs is one more demonstration of &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Benford's_law"&gt;Benford's Law&lt;/a&gt; but I'm going to do it anyway for three reasons:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;it's a good way to experiment with the formatting of the site &lt;a class="footnote-reference" href="#id4" id="id2"&gt;[1]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;it's a fairly simple concept that is still a little non-intuitive&lt;/li&gt;
&lt;li&gt;it's a good demonstration of how more local governments are making their financial data publicly available&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Tons of credit for this idea goes to my old college friend, &lt;a class="reference external" href="http://aaronoellis.com/articles/benfords-law-and-the-denver-city-checkbook"&gt;Aaron&lt;/a&gt;, who did a very similar analysis over on his website.&lt;/p&gt;
&lt;div class="section" id="a-short-explanation"&gt;
&lt;h2&gt;A Short Explanation&lt;/h2&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;From Wikipedia:&lt;/dt&gt;
&lt;dd&gt;&lt;p class="first"&gt;Benford's Law, also called the First-Digit Law, refers to the frequency distribution of digits in many (but not all) real-life sources of data.
In this distribution, the number 1 occurs as the leading digit about 30% of the time, while larger numbers occur in that position less frequently:
9 as the first digit less than 5% of the time.&lt;/p&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;p class="last"&gt;This result has been found to apply to a wide variety of data sets, including electricity bills, street addresses, stock prices, population numbers,
death rates, lengths of rivers, physical and mathematical constants, and processes described by power laws (which are very common in nature).
It tends to be most accurate when values are distributed across multiple orders of magnitude.&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;I'd recommend reading the whole article as it also does a good job of explaining a few different ways to understand how this distribution arises.
Specifically, this is the expected distribution of first digits:&lt;/p&gt;
&lt;table border="1" class="center docutils"&gt;
&lt;colgroup&gt;
&lt;col width="55%" /&gt;
&lt;col width="45%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;First Digit&lt;/td&gt;
&lt;td&gt;Frequency&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;30.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;17.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;12.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;9.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;7.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;6.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;5.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;5.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;4.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Now let's look for some data to test this on.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-springfield-massachusetts-open-checkbook"&gt;
&lt;h2&gt;The Springfield Massachusetts Open Checkbook&lt;/h2&gt;
&lt;p&gt;For my &amp;quot;real-life source of data&amp;quot;, I searched for open city checkbooks on Google because a large source of financial transaction data should
demonstrate Benford's Law really well and I was secretly hoping to expose some fraud (more on this shortly). The easiest to download option on the front page was
for &lt;a class="reference external" href="http://www3.springfield-ma.gov/finance/opencheckbook.html"&gt;Springfield, Massachusetts&lt;/a&gt;. I would have liked to use DC but I couldn't find their information publicly available.&lt;/p&gt;
&lt;p&gt;What's cool about Benford's Law is that it can be used to identify fraudulent activity given large volumes of transaction data.
Humans tend to make up numbers that are distributed uniformly which would very obviously not match the distribution seen above.
But the conundrum, at least for trying to uncover fraud via the internet, is this: any city treasurer commiting fraud probably isn't making the records publicly available
and vice versa. So until I get subpoena power, this analysis will be a confirmation of the statistics rathern than uncovering any devious activities.&lt;/p&gt;
&lt;p&gt;The downloaded data has 41,279 transactions totalling $294.3MM as of April 21st, 2014 (Their fiscal year appears to begin in July).
If you're interested in city expenditures, the data is pretty detailed but I was really only after the transactions amounts.
After a little bit of data cleaning, I wrote a quick R script to pull out the first digit from all the transactions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;benford &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kr"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;transaction_vector&lt;span class="p"&gt;){&lt;/span&gt;
    textv &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; as.character&lt;span class="p"&gt;(&lt;/span&gt;transaction_vector&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    digit_vector &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; sapply&lt;span class="p"&gt;(&lt;/span&gt;textv&lt;span class="p"&gt;,&lt;/span&gt; substr&lt;span class="p"&gt;,&lt;/span&gt; start &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; stop &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; USE.NAMES &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;FALSE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    as.numeric&lt;span class="p"&gt;(&lt;/span&gt;digit_vector&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Comparing the frequency from our data to the expected distribution:&lt;/p&gt;
&lt;table border="1" class="center docutils"&gt;
&lt;colgroup&gt;
&lt;col width="42%" /&gt;
&lt;col width="35%" /&gt;
&lt;col width="23%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;First Digit&lt;/td&gt;
&lt;td&gt;Expected&lt;/td&gt;
&lt;td&gt;Actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;30.1%&lt;/td&gt;
&lt;td&gt;29.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;17.6%&lt;/td&gt;
&lt;td&gt;18.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;12.5%&lt;/td&gt;
&lt;td&gt;10.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;9.7%&lt;/td&gt;
&lt;td&gt;8.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;7.9%&lt;/td&gt;
&lt;td&gt;7.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;6.7%&lt;/td&gt;
&lt;td&gt;7.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;5.8%&lt;/td&gt;
&lt;td&gt;6.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;5.1%&lt;/td&gt;
&lt;td&gt;5.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;4.6%&lt;/td&gt;
&lt;td&gt;5.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Looks like a pretty close match, though if I we're actually auditing them, I'd want additional information to explain why 9 is so common  as
a first digit in their transaction list. &lt;a class="footnote-reference" href="#id5" id="id3"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Next let's try out the excellent tool &lt;a class="reference external" href="https://github.com/Quartz/Chartbuilder/"&gt;Chartbuilder&lt;/a&gt; to plot the frequency of first digits against expected distribution from above:&lt;/p&gt;
&lt;img alt="Benfords-Law-Example-1" class="align-center" src="/images/Benfords-Law-Example-1.png" style="width: 600px; height: 338px;" /&gt;
&lt;p&gt;Cool. Chartbuilder isn't meant to be a super powerful plotting tool but it does make it easy to create great looking charts really quickly, hence its use
in a lot of digital newsrooms (NRP, WSJ, 538, etc.).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="scale-invariance"&gt;
&lt;h2&gt;Scale Invariance&lt;/h2&gt;
&lt;p&gt;I wanted to extend the demonstration just slightly to show an additional feature of the distribution:
it should be &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Benford's_law#Scale_invariance"&gt;scale invariant&lt;/a&gt; so we can multiply our whole transaction list by any number and the law should still hold (this also means that Benford's Law will
hold even if you measure your target variable in another scale; think switching from dollars to euro or feet to meters).&lt;/p&gt;
&lt;p&gt;Let's run through an example first and then I'll reveal the visualization. Using the case where the constant is 2, think about what happens to all of our original
numbers: things that start with 1 (30.1%) will now start with 2 or 3, things that start with 2 become 4 or 5, and so on. We look to the expected
distributions above and see that numbers starting with 5 through 9 should make up (7.9% + 6.7% + 5.8% + 5.1% + 4.6%) = 30.1% of the first digits and these are
all the numbers which when multiplied by 2, will now have a first digit of 1. The distribution, at least for ones, matches between the two groups!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="visualization"&gt;
&lt;h2&gt;Visualization&lt;/h2&gt;
&lt;p&gt;I refit a very cool visualization technique called &lt;a class="reference external" href="http://www.jasondavies.com/parallel-sets/"&gt;Parallel Sets&lt;/a&gt; from &lt;a class="reference external" href="http://www.jasondavies.com/"&gt;Jason Davies&lt;/a&gt; using the &lt;a class="reference external" href="http://d3js.org/"&gt;D3.js&lt;/a&gt; library. Let's take a look first then I'll explain below:&lt;/p&gt;
&lt;div id="vis"&gt;&lt;noscript&gt;Visualization failed to load&lt;/noscript&gt;&lt;/div&gt;&lt;p&gt;Sorry if it's a lot to handle. Things to notice:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Each color/shade represents a different &amp;quot;first digit group&amp;quot; from our original transaction list. You can hover over to see the value if you get lost.&lt;/li&gt;
&lt;li&gt;Each black bar with a number above it represents the associated first digit frequency for that transformation -- from original at the top to &amp;quot;multiplied by nine&amp;quot; at the bottom. You can hover over the bar/digit to see what portion of the total it represents. Notice that the lengths of these bars are remarkably consistent across the transformations (which is the point of this exercise).&lt;/li&gt;
&lt;li&gt;Each colored path shows how transaction amounts from the original list move to different &amp;quot;first digit groups&amp;quot; when multiplied by the different constants: In the first row, the 1's go to 2's and 3's, the 2's go to 4's and 5's and so on (as mentioned in the example before).&lt;/li&gt;
&lt;li&gt;All of the rows can be sorted by &amp;quot;numeric&amp;quot; and &amp;quot;size&amp;quot;: there is at least one use to this (let me know if you find more) but it is more a relic of the original visulation. The one thing I would recommend is sorting the first row by reverse numeric (&amp;quot;&amp;lt;&amp;lt; numeric&amp;quot;) and you can really clearly see how the 5's-9's from the original group end up as 1's when multiplied by 2 (and in the same proportion).&lt;/li&gt;
&lt;li&gt;The data is a little jumbled towards the end, that's just an artifact of a bad sorting attempt by me. Sorry.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, that's Benford's Law and my first real post, hope you enjoyed it!&lt;/p&gt;
&lt;div class="separator container"&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;See if you can keep track of how many times I use not entirely necessary formatting during this post for testing reasons...this is one.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id5" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;While previewing this document, the aforementioned Aaron brought up a good point: deviations from the expected distribution can happen if the data source is signficantly influenced by human behaviors. In the instance of 9's, people may have a natural aversion to going to the next order of magnitude and set prices for things at $0.99 or $9.99, raising the observed distribution for that digit.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Drew Bollinger</dc:creator><pubDate>Mon, 21 Apr 2014 21:00:00 -0400</pubDate><guid>tag:drewbo.com,2014-04-21:blog/2014/04/21/benfords-law/</guid><category>blog</category><category>r</category><category>chartbuilder</category><category>d3</category></item><item><title>New Website</title><link>http://drewbo.com/blog/2014/04/14/new-website/</link><description>&lt;dl class="docutils"&gt;
&lt;dt&gt;I'm going to start writing this new website using &lt;a class="reference external" href="http://docs.getpelican.com/en/3.3.0/"&gt;Pelican&lt;/a&gt;, which uses &lt;a class="reference external" href="http://www.python.org/"&gt;Python&lt;/a&gt; to generate static websites from &lt;a class="reference external" href="http://docutils.sourceforge.net/rst.html"&gt;reStructuredText&lt;/a&gt;. The &lt;a class="reference external" href="https://github.com/fjavieralba/flasky"&gt;theme&lt;/a&gt; is borrowed from &lt;a class="reference external" href="http://fjavieralba.com/"&gt;fjavieralba&lt;/a&gt; which I will continue to customize to suit my needs as necessary. New content coming soon (when I figure out how to use all of this).&lt;/dt&gt;
&lt;dd&gt;-Drew&lt;/dd&gt;
&lt;/dl&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Drew Bollinger</dc:creator><pubDate>Mon, 14 Apr 2014 21:00:00 -0400</pubDate><guid>tag:drewbo.com,2014-04-14:blog/2014/04/14/new-website/</guid><category>blog</category><category>python</category><category>pelican</category></item></channel></rss>